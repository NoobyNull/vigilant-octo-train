# External Integrations

**Analysis Date:** 2026-02-08

## APIs & External Services

**None Detected**

No external HTTP APIs, web services, or third-party SaaS integrations are used in this codebase. The application is fully offline and self-contained.

## Data Storage

**Databases:**
- SQLite3 (embedded, single-file database)
  - Location: Platform-specific data directory
    - Linux: `~/.local/share/digitalworkshop/workshop.db`
    - Windows: `%LOCALAPPDATA%/DigitalWorkshop/workshop.db`
    - macOS: `~/Library/Application Support/DigitalWorkshop/workshop.db`
  - Connection: `src/core/database/database.cpp` - RAII wrapper for sqlite3 connection
  - Schema: `src/core/database/schema.cpp` - Manages database initialization and versioning
  - ORM approach: Custom repository pattern with prepared statements
    - `ModelRepository` (`src/core/database/model_repository.cpp`) - 3D model metadata
    - `ProjectRepository` (`src/core/database/project_repository.cpp`) - Project management
    - `CostRepository` (`src/core/database/cost_repository.cpp`) - Cost estimation data
  - Features:
    - Transaction support (RAII-based)
    - Foreign key constraints enabled
    - WAL (Write-Ahead Logging) mode for concurrency
    - Prepared statement API with parameter binding

**File Storage:**
- Local filesystem only
  - Project files: `.dwp` (Digital Workshop Project) format
    - Stored as ZIP archive (compression via zlib)
    - Location: User-specified, typically `~/Projects/DigitalWorkshop/`
    - Configuration: `src/core/config/config.h` stores last project directory
  - Imported models: STL, OBJ, 3MF formats
    - Cached locally after processing
    - Thumbnail cache: `~/.local/share/digitalworkshop/cache/thumbnails/` (Linux)
  - Configuration files: INI format
    - Location: `~/.config/digitalworkshop/` (Linux)
    - Parsed by: `src/core/config/config.cpp`
  - Log files:
    - Location: `~/.local/share/digitalworkshop/logs/` (platform-specific)
    - Handler: `src/core/utils/log.cpp`

**Caching:**
- In-memory: Mesh vertex data, thumbnail cache
- Persistent cache: Thumbnail images generated by `src/render/thumbnail_generator.cpp`
  - No external cache service; local directory based
  - Location: Cache directory within data path

## Authentication & Identity

**Auth Provider:**
- None - Not applicable
- Application is single-user, desktop-based
- No user accounts, login, or authentication required
- Settings/preferences are per-machine

## Monitoring & Observability

**Error Tracking:**
- None - No external error tracking service
- Errors are logged locally and displayed in UI dialogs

**Logs:**
- Local file-based logging
  - Handler: `src/core/utils/log.cpp`
  - Format: Text log files in application data directory
  - Rotation: Not implemented (append-only)
  - Levels: Debug, Info, Warning, Error
  - Usage pattern: `dw::log::info("message")` throughout codebase

**Debugging:**
- Compile commands export: CMake generates `compile_commands.json` for IDE integration
- Clang-Tidy integration available: `.clang-tidy` configuration present

## CI/CD & Deployment

**Hosting:**
- None - This is a desktop application, not a web application
- Distributed as compiled binary installers

**CI Pipeline:**
- GitHub Actions (`.github/workflows/ci.yml`)
  - **Linux job** (ubuntu-24.04):
    - Build: `cmake -B build -DCMAKE_BUILD_TYPE=Release -DDW_BUILD_TESTS=ON`
    - Test: Run `./build/tests/dw_tests`
    - Package: Generate Linux self-extracting installer via `./packaging/linux/make-installer.sh`
    - Artifact: `.run` file (makeself archive)
    - Trigger: Push to main, pull requests, version tags (v*)

  - **Windows job** (windows-latest):
    - Build: CMake with MSVC
    - Test: Run `./build/tests/Release/dw_tests.exe`
    - Package: Generate Windows installer via `cpack -C Release` (NSIS)
    - Artifact: `.exe` installer file
    - Trigger: Same as Linux

  - **Release job** (on version tags):
    - Downloads both Linux and Windows artifacts
    - Creates GitHub Release with binaries
    - Uses `softprops/action-gh-release@v2`
    - Auto-generates release notes

**Deployment Method:**
- GitHub Releases (artifacts uploaded automatically)
- Binary distribution: Native installers per platform
- No server-side deployment, cloud sync, or auto-update mechanism

## Environment Configuration

**Required env vars:**
- None required for normal operation
- Application uses platform-specific paths (getenv for home directory)

**Configuration files:**
- INI file format: `~/.config/digitalworkshop/digitalworkshop.ini`
  - Parser: `src/core/config/config.cpp`
  - Content: Recent projects, UI preferences, render settings, input bindings
  - Hot-reload: Watched via polling in `src/core/config/config_watcher.cpp`

**Workspace/Project Configuration:**
- Per-project settings stored in `.dwp` (ZIP archive):
  - Contains: Model references, scene state, optimizer parameters
  - Format: Custom binary + metadata
  - Parser: `src/core/project/project.cpp`

**Feature Flags:**
- CMake build-time flags only:
  - `DW_BUILD_TESTS` - Enable/disable test compilation
  - No runtime feature flags

## Webhooks & Callbacks

**Incoming:**
- None - No webhook endpoints

**Outgoing:**
- None - No external callback services

**File System Watchers:**
- Configuration file watching:
  - Type: Polling-based (not inotify)
  - Purpose: Hot-reload config changes without restart
  - Implementation: `src/core/config/config_watcher.cpp`
  - Polling interval: Configurable, checked during main loop

## Platform-Specific Integrations

**Windows:**
- File associations: `.dwp` files registered with application
  - Via NSIS installer: Registry keys for shell open command
  - Location in CMakeLists.txt: `CPACK_NSIS_EXTRA_INSTALL_COMMANDS`

**Linux:**
- Standard XDG paths for configuration and data
- Desktop file integration: Not currently generated
- No systemd integration

**macOS:**
- Platform-specific paths defined in `src/core/paths/app_paths.cpp`
- Not currently built/tested in CI

## Data Formats & Serialization

**Supported Input Formats:**
- STL (Stereolithography) - Via `src/core/loaders/stl_loader.cpp`
- OBJ (Wavefront) - Via `src/core/loaders/obj_loader.cpp`
- 3MF (3D Manufacturing Format) - Via `src/core/loaders/threemf_loader.cpp` with zlib decompression

**Supported Output Formats:**
- STL export - Via `src/core/export/model_exporter.cpp`
- Project serialization (`.dwp`) - Via `src/core/archive/archive.cpp` with zlib compression

**Internal Formats:**
- G-code analysis: Text parsing and custom AST
  - Parser: `src/core/gcode/gcode_parser.cpp`
  - Analyzer: `src/core/gcode/gcode_analyzer.cpp`

**Serialization Approach:**
- No external serialization library (JSON, Protobuf, etc.)
- Custom binary formats for performance-critical data
- INI for human-readable configuration
- JSON not used (config is INI-based)

## Summary

**Connectivity Profile:** Fully Offline
- No network requirements
- No external dependencies
- No cloud synchronization
- All data stored locally

**Security Model:**
- No encryption for local files
- No authentication mechanisms
- Single-user, local-machine scope
- Permissions managed by OS filesystem ACLs

**Scaling Considerations:**
- Single-machine application, no distributed architecture
- SQLite suitable for single-user desktop use
- Database file size typically < 100MB for typical workflows

---

*Integration audit: 2026-02-08*
